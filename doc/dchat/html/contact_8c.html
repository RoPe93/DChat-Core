<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>DChat: src/contact.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">DChat
   &#160;<span id="projectnumber">0.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('contact_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">contact.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This file contains functions concerning dchat contacts for adding, deleting, searching, sending and receiving contacts.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &quot;dchat_h/contact.h&quot;</code><br />
<code>#include &quot;dchat_h/types.h&quot;</code><br />
<code>#include &quot;dchat_h/decoder.h&quot;</code><br />
<code>#include &quot;dchat_h/dchat.h&quot;</code><br />
<code>#include &quot;dchat_h/log.h&quot;</code><br />
<code>#include &quot;dchat_h/util.h&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for contact.c:</div>
<div class="dyncontent">
<div class="center"><img src="contact_8c__incl.png" border="0" usemap="#src_2contact_8c" alt=""/></div>
<map name="src_2contact_8c" id="src_2contact_8c">
<area shape="rect" id="node5" href="contact_8h_source.html" title="dchat_h/contact.h" alt="" coords="331,155,457,181"/><area shape="rect" id="node6" href="types_8h_source.html" title="types.h" alt="" coords="383,229,448,256"/><area shape="rect" id="node11" href="decoder_8h_source.html" title="dchat_h/decoder.h" alt="" coords="395,80,527,107"/><area shape="rect" id="node12" href="dchat_8h_source.html" title="dchat_h/dchat.h" alt="" coords="672,155,789,181"/><area shape="rect" id="node14" href="log_8h_source.html" title="dchat_h/log.h" alt="" coords="114,80,216,107"/><area shape="rect" id="node18" href="util_8h_source.html" title="dchat_h/util.h" alt="" coords="552,80,653,107"/><area shape="rect" id="node9" href="network_8h_source.html" title="network.h" alt="" coords="399,304,479,331"/><area shape="rect" id="node16" href="option_8h_source.html" title="option.h" alt="" coords="91,155,160,181"/></map>
</div>
</div>
<p><a href="contact_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a625b0742c9e1cbd35146d35ecbf25282"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="contact_8c.html#a625b0742c9e1cbd35146d35ecbf25282">send_contacts</a> (<a class="el" href="structdchat__conf.html">dchat_conf_t</a> *<a class="el" href="dchat_8c.html#a5497dfcbcfecec06aaf63df011c70f83">cnf</a>, int n)</td></tr>
<tr class="memdesc:a625b0742c9e1cbd35146d35ecbf25282"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends local contactlist to a contact.  <a href="#a625b0742c9e1cbd35146d35ecbf25282">More...</a><br /></td></tr>
<tr class="separator:a625b0742c9e1cbd35146d35ecbf25282"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2161fbd1e0fc61c762f08bb102e54ab8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="contact_8c.html#a2161fbd1e0fc61c762f08bb102e54ab8">receive_contacts</a> (<a class="el" href="structdchat__conf.html">dchat_conf_t</a> *<a class="el" href="dchat_8c.html#a5497dfcbcfecec06aaf63df011c70f83">cnf</a>, <a class="el" href="structdchat__pdu.html">dchat_pdu_t</a> *pdu)</td></tr>
<tr class="memdesc:a2161fbd1e0fc61c762f08bb102e54ab8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Contacts transferred via PDU will be added to the contactlist.  <a href="#a2161fbd1e0fc61c762f08bb102e54ab8">More...</a><br /></td></tr>
<tr class="separator:a2161fbd1e0fc61c762f08bb102e54ab8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0681254b16e6d20d63a03aed84c12e2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="contact_8c.html#aa0681254b16e6d20d63a03aed84c12e2">check_duplicates</a> (<a class="el" href="structdchat__conf.html">dchat_conf_t</a> *<a class="el" href="dchat_8c.html#a5497dfcbcfecec06aaf63df011c70f83">cnf</a>, int n)</td></tr>
<tr class="memdesc:aa0681254b16e6d20d63a03aed84c12e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks the local contactlist for duplicates.  <a href="#aa0681254b16e6d20d63a03aed84c12e2">More...</a><br /></td></tr>
<tr class="separator:aa0681254b16e6d20d63a03aed84c12e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac15f4eb395316547db5ceba947a2f3b9"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="contact_8c.html#ac15f4eb395316547db5ceba947a2f3b9">contact_to_string</a> (<a class="el" href="structcontact.html">contact_t</a> *<a class="el" href="structcontact.html">contact</a>)</td></tr>
<tr class="memdesc:ac15f4eb395316547db5ceba947a2f3b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts a contact into a string.  <a href="#ac15f4eb395316547db5ceba947a2f3b9">More...</a><br /></td></tr>
<tr class="separator:ac15f4eb395316547db5ceba947a2f3b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fc6d1fda23da9c12247773139cc9c74"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="contact_8c.html#a5fc6d1fda23da9c12247773139cc9c74">string_to_contact</a> (<a class="el" href="structcontact.html">contact_t</a> *<a class="el" href="structcontact.html">contact</a>, char *string)</td></tr>
<tr class="memdesc:a5fc6d1fda23da9c12247773139cc9c74"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts a string into a contact.  <a href="#a5fc6d1fda23da9c12247773139cc9c74">More...</a><br /></td></tr>
<tr class="separator:a5fc6d1fda23da9c12247773139cc9c74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0de7073d40f7447f933e334054d432d8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="contact_8c.html#a0de7073d40f7447f933e334054d432d8">realloc_contactlist</a> (<a class="el" href="structdchat__conf.html">dchat_conf_t</a> *<a class="el" href="dchat_8c.html#a5497dfcbcfecec06aaf63df011c70f83">cnf</a>, int newsize)</td></tr>
<tr class="memdesc:a0de7073d40f7447f933e334054d432d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resizes the contactlist.  <a href="#a0de7073d40f7447f933e334054d432d8">More...</a><br /></td></tr>
<tr class="separator:a0de7073d40f7447f933e334054d432d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6777b1a477207c7bbc9e560cf9caabed"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="contact_8c.html#a6777b1a477207c7bbc9e560cf9caabed">add_contact</a> (<a class="el" href="structdchat__conf.html">dchat_conf_t</a> *<a class="el" href="dchat_8c.html#a5497dfcbcfecec06aaf63df011c70f83">cnf</a>, int fd)</td></tr>
<tr class="memdesc:a6777b1a477207c7bbc9e560cf9caabed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a new contact to the local contactlist.  <a href="#a6777b1a477207c7bbc9e560cf9caabed">More...</a><br /></td></tr>
<tr class="separator:a6777b1a477207c7bbc9e560cf9caabed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56a9992b188f855108c72588953fe8a6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="contact_8c.html#a56a9992b188f855108c72588953fe8a6">del_contact</a> (<a class="el" href="structdchat__conf.html">dchat_conf_t</a> *<a class="el" href="dchat_8c.html#a5497dfcbcfecec06aaf63df011c70f83">cnf</a>, int n)</td></tr>
<tr class="memdesc:a56a9992b188f855108c72588953fe8a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deletes a contact from the local contactlist.  <a href="#a56a9992b188f855108c72588953fe8a6">More...</a><br /></td></tr>
<tr class="separator:a56a9992b188f855108c72588953fe8a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01eb319ee1d229714b6a20e144181a1a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="contact_8c.html#a01eb319ee1d229714b6a20e144181a1a">find_contact</a> (<a class="el" href="structdchat__conf.html">dchat_conf_t</a> *<a class="el" href="dchat_8c.html#a5497dfcbcfecec06aaf63df011c70f83">cnf</a>, <a class="el" href="structcontact.html">contact_t</a> *<a class="el" href="structcontact.html">contact</a>, int begin)</td></tr>
<tr class="memdesc:a01eb319ee1d229714b6a20e144181a1a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Searches a contact in the local contactlist.  <a href="#a01eb319ee1d229714b6a20e144181a1a">More...</a><br /></td></tr>
<tr class="separator:a01eb319ee1d229714b6a20e144181a1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file contains functions concerning dchat contacts for adding, deleting, searching, sending and receiving contacts. </p>

<p>Definition in file <a class="el" href="contact_8c_source.html">contact.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a6777b1a477207c7bbc9e560cf9caabed"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int add_contact </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdchat__conf.html">dchat_conf_t</a> *&#160;</td>
          <td class="paramname"><em>cnf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds a new contact to the local contactlist. </p>
<p>The given socket descriptor of the remote client will be used to add a new contact to the contactlist holded by the global config. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cnf</td><td>Pointer to dchat_conf_t structure holding the contact list </td></tr>
    <tr><td class="paramname">fd</td><td>Socket file descriptor of the new contact </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>index of contact list, where new contact has been added or -1 in case of error </dd></dl>

<p>Definition at line <a class="el" href="contact_8c_source.html#l00449">449</a> of file <a class="el" href="contact_8c_source.html">contact.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="contact_8c_a6777b1a477207c7bbc9e560cf9caabed_cgraph.png" border="0" usemap="#contact_8c_a6777b1a477207c7bbc9e560cf9caabed_cgraph" alt=""/></div>
<map name="contact_8c_a6777b1a477207c7bbc9e560cf9caabed_cgraph" id="contact_8c_a6777b1a477207c7bbc9e560cf9caabed_cgraph">
<area shape="rect" id="node2" href="contact_8c.html#a0de7073d40f7447f933e334054d432d8" title="Resizes the contactlist. " alt="" coords="149,31,277,57"/><area shape="rect" id="node3" href="log_8c.html#a021b18b681712d42cb07c99171691a84" title="Log a message. " alt="" coords="325,5,397,32"/><area shape="rect" id="node5" href="log_8c.html#a677da14e8c4326bde43622f233f1ead3" title="Prints an error message and terminates this program. " alt="" coords="338,56,385,83"/><area shape="rect" id="node4" href="log_8c.html#a38678da7483f269b8c96f83a8f45ef12" title="Log a message to a file. " alt="" coords="445,31,528,57"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa0681254b16e6d20d63a03aed84c12e2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int check_duplicates </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdchat__conf.html">dchat_conf_t</a> *&#160;</td>
          <td class="paramname"><em>cnf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks the local contactlist for duplicates. </p>
<p>Checks if there are duplicate contacts in the contactlist. Contacts with the same listening port and ip address are considered as duplicate. If there are duplicates, the index of the contact which should be deleted will be returned. This function implements the duplicate detection mechanismn of the DChat protocol. Therefore for further information read the DChat protocol specification for detecting and removing duplicates. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="contact_8c.html#a01eb319ee1d229714b6a20e144181a1a" title="Searches a contact in the local contactlist. ">find_contact()</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cnf</td><td>Pointer to global configuration holding the contactlist </td></tr>
    <tr><td class="paramname">n</td><td>Index of contact to check for duplicates </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>index of duplicate, -1 if there are no duplicates or if contact is not in the contactlist </dd></dl>

<p>Definition at line <a class="el" href="contact_8c_source.html#l00206">206</a> of file <a class="el" href="contact_8c_source.html">contact.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="contact_8c_aa0681254b16e6d20d63a03aed84c12e2_cgraph.png" border="0" usemap="#contact_8c_aa0681254b16e6d20d63a03aed84c12e2_cgraph" alt=""/></div>
<map name="contact_8c_aa0681254b16e6d20d63a03aed84c12e2_cgraph" id="contact_8c_aa0681254b16e6d20d63a03aed84c12e2_cgraph">
<area shape="rect" id="node2" href="contact_8c.html#a01eb319ee1d229714b6a20e144181a1a" title="Searches a contact in the local contactlist. " alt="" coords="179,56,272,83"/><area shape="rect" id="node3" href="contact_8c.html#ac15f4eb395316547db5ceba947a2f3b9" title="Converts a contact into a string. " alt="" coords="321,56,445,83"/><area shape="rect" id="node4" href="network_8c.html#a139629f69df293ba1da88fea96af5e5e" title="Checks wether the given onion&#45;id is a valid onion address. " alt="" coords="493,5,600,32"/><area shape="rect" id="node5" href="network_8c.html#a53aa686284d28600afef0e06d7ab3d54" title="Checks wether the given port is a valid TCP port. " alt="" coords="498,56,595,83"/><area shape="rect" id="node6" href="log_8c.html#a677da14e8c4326bde43622f233f1ead3" title="Prints an error message and terminates this program. " alt="" coords="523,107,570,133"/><area shape="rect" id="node7" href="log_8c.html#a38678da7483f269b8c96f83a8f45ef12" title="Log a message to a file. " alt="" coords="648,107,731,133"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac15f4eb395316547db5ceba947a2f3b9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* contact_to_string </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcontact.html">contact_t</a> *&#160;</td>
          <td class="paramname"><em>contact</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Converts a contact into a string. </p>
<p>This function converts a contact into a string representation. The string of the contact will then be returned and should be freed. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">contact</td><td>Pointer to contact that should be converted to a string </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>String representation of contact, NULL on error </dd></dl>

<p>Definition at line <a class="el" href="contact_8c_source.html#l00289">289</a> of file <a class="el" href="contact_8c_source.html">contact.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="contact_8c_ac15f4eb395316547db5ceba947a2f3b9_cgraph.png" border="0" usemap="#contact_8c_ac15f4eb395316547db5ceba947a2f3b9_cgraph" alt=""/></div>
<map name="contact_8c_ac15f4eb395316547db5ceba947a2f3b9_cgraph" id="contact_8c_ac15f4eb395316547db5ceba947a2f3b9_cgraph">
<area shape="rect" id="node2" href="network_8c.html#a139629f69df293ba1da88fea96af5e5e" title="Checks wether the given onion&#45;id is a valid onion address. " alt="" coords="179,5,285,32"/><area shape="rect" id="node3" href="network_8c.html#a53aa686284d28600afef0e06d7ab3d54" title="Checks wether the given port is a valid TCP port. " alt="" coords="183,56,281,83"/><area shape="rect" id="node4" href="log_8c.html#a677da14e8c4326bde43622f233f1ead3" title="Prints an error message and terminates this program. " alt="" coords="209,107,255,133"/><area shape="rect" id="node5" href="log_8c.html#a38678da7483f269b8c96f83a8f45ef12" title="Log a message to a file. " alt="" coords="333,107,416,133"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a56a9992b188f855108c72588953fe8a6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int del_contact </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdchat__conf.html">dchat_conf_t</a> *&#160;</td>
          <td class="paramname"><em>cnf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deletes a contact from the local contactlist. </p>
<p>Deletes a contact from the contact list holded by the global config. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cnf</td><td>Pointer to dchat_conf_t structure holding the contact list </td></tr>
    <tr><td class="paramname">n</td><td>Index of customer in the customer list </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 if index is out of bounds </dd></dl>

<p>Definition at line <a class="el" href="contact_8c_source.html#l00487">487</a> of file <a class="el" href="contact_8c_source.html">contact.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="contact_8c_a56a9992b188f855108c72588953fe8a6_cgraph.png" border="0" usemap="#contact_8c_a56a9992b188f855108c72588953fe8a6_cgraph" alt=""/></div>
<map name="contact_8c_a56a9992b188f855108c72588953fe8a6_cgraph" id="contact_8c_a56a9992b188f855108c72588953fe8a6_cgraph">
<area shape="rect" id="node2" href="log_8c.html#a021b18b681712d42cb07c99171691a84" title="Log a message. " alt="" coords="320,5,392,32"/><area shape="rect" id="node4" href="contact_8c.html#a0de7073d40f7447f933e334054d432d8" title="Resizes the contactlist. " alt="" coords="144,56,272,83"/><area shape="rect" id="node3" href="log_8c.html#a38678da7483f269b8c96f83a8f45ef12" title="Log a message to a file. " alt="" coords="440,31,523,57"/><area shape="rect" id="node5" href="log_8c.html#a677da14e8c4326bde43622f233f1ead3" title="Prints an error message and terminates this program. " alt="" coords="333,56,379,83"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a01eb319ee1d229714b6a20e144181a1a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int find_contact </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdchat__conf.html">dchat_conf_t</a> *&#160;</td>
          <td class="paramname"><em>cnf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcontact.html">contact_t</a> *&#160;</td>
          <td class="paramname"><em>contact</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>begin</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Searches a contact in the local contactlist. </p>
<p>Searches for a contact in the contactlist holded within the global config and returns its index in the contactlist. To find a contact, its onion address and listening port will be used and compared with each other. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cnf</td><td>Pointer to global configuration holding the contactlist </td></tr>
    <tr><td class="paramname">contact</td><td>Pointer to contact to search for </td></tr>
    <tr><td class="paramname">begin</td><td>Index where the search will begin in the contactlist </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>index of contact, -1 if the contact represents ourself, -2 if not found </dd></dl>

<p>Definition at line <a class="el" href="contact_8c_source.html#l00533">533</a> of file <a class="el" href="contact_8c_source.html">contact.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="contact_8c_a01eb319ee1d229714b6a20e144181a1a_cgraph.png" border="0" usemap="#contact_8c_a01eb319ee1d229714b6a20e144181a1a_cgraph" alt=""/></div>
<map name="contact_8c_a01eb319ee1d229714b6a20e144181a1a_cgraph" id="contact_8c_a01eb319ee1d229714b6a20e144181a1a_cgraph">
<area shape="rect" id="node2" href="contact_8c.html#ac15f4eb395316547db5ceba947a2f3b9" title="Converts a contact into a string. " alt="" coords="147,56,271,83"/><area shape="rect" id="node3" href="network_8c.html#a139629f69df293ba1da88fea96af5e5e" title="Checks wether the given onion&#45;id is a valid onion address. " alt="" coords="320,5,427,32"/><area shape="rect" id="node4" href="network_8c.html#a53aa686284d28600afef0e06d7ab3d54" title="Checks wether the given port is a valid TCP port. " alt="" coords="325,56,422,83"/><area shape="rect" id="node5" href="log_8c.html#a677da14e8c4326bde43622f233f1ead3" title="Prints an error message and terminates this program. " alt="" coords="350,107,397,133"/><area shape="rect" id="node6" href="log_8c.html#a38678da7483f269b8c96f83a8f45ef12" title="Log a message to a file. " alt="" coords="475,107,557,133"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a0de7073d40f7447f933e334054d432d8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int realloc_contactlist </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdchat__conf.html">dchat_conf_t</a> *&#160;</td>
          <td class="paramname"><em>cnf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>newsize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Resizes the contactlist. </p>
<p>Function to resize the contactlist to a given size. Old contacts are copied to the new resized contact list if they fit in it </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cnf</td><td>Global config structure holding the contactlist </td></tr>
    <tr><td class="paramname">newsize</td><td>New size of the contactlist </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on error </dd></dl>

<p>Definition at line <a class="el" href="contact_8c_source.html#l00394">394</a> of file <a class="el" href="contact_8c_source.html">contact.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="contact_8c_a0de7073d40f7447f933e334054d432d8_cgraph.png" border="0" usemap="#contact_8c_a0de7073d40f7447f933e334054d432d8_cgraph" alt=""/></div>
<map name="contact_8c_a0de7073d40f7447f933e334054d432d8_cgraph" id="contact_8c_a0de7073d40f7447f933e334054d432d8_cgraph">
<area shape="rect" id="node2" href="log_8c.html#a021b18b681712d42cb07c99171691a84" title="Log a message. " alt="" coords="181,5,253,32"/><area shape="rect" id="node4" href="log_8c.html#a677da14e8c4326bde43622f233f1ead3" title="Prints an error message and terminates this program. " alt="" coords="194,56,241,83"/><area shape="rect" id="node3" href="log_8c.html#a38678da7483f269b8c96f83a8f45ef12" title="Log a message to a file. " alt="" coords="301,31,384,57"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a2161fbd1e0fc61c762f08bb102e54ab8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int receive_contacts </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdchat__conf.html">dchat_conf_t</a> *&#160;</td>
          <td class="paramname"><em>cnf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdchat__pdu.html">dchat_pdu_t</a> *&#160;</td>
          <td class="paramname"><em>pdu</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Contacts transferred via PDU will be added to the contactlist. </p>
<p>Parses the contact information stored in the given PDU, connects to this remote client , if this client is unknown, the local contactlist within the global config will be sent to him. Finally the remote client is added as contact to the local contactlist. For every parsed contact information, this procedure is repeated. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cnf</td><td>Pointer to global configuration holding the contactlist </td></tr>
    <tr><td class="paramname">pdu</td><td>PDU with the contact information in its content </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>amount of new contacts added to the contactlist, -1 on error </dd></dl>

<p>Definition at line <a class="el" href="contact_8c_source.html#l00133">133</a> of file <a class="el" href="contact_8c_source.html">contact.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="contact_8c_a2161fbd1e0fc61c762f08bb102e54ab8_cgraph.png" border="0" usemap="#contact_8c_a2161fbd1e0fc61c762f08bb102e54ab8_cgraph" alt=""/></div>
<map name="contact_8c_a2161fbd1e0fc61c762f08bb102e54ab8_cgraph" id="contact_8c_a2161fbd1e0fc61c762f08bb102e54ab8_cgraph">
<area shape="rect" id="node2" href="decoder_8c.html#ab4502d6fa3578ce5f3b4a92e5489c978" title="Extracts a fraction of the content. " alt="" coords="1091,1120,1213,1147"/><area shape="rect" id="node3" href="log_8c.html#a021b18b681712d42cb07c99171691a84" title="Log a message. " alt="" coords="1309,1171,1381,1197"/><area shape="rect" id="node6" href="contact_8c.html#a5fc6d1fda23da9c12247773139cc9c74" title="Converts a string into a contact. " alt="" coords="1090,1171,1214,1197"/><area shape="rect" id="node9" href="contact_8c.html#a01eb319ee1d229714b6a20e144181a1a" title="Searches a contact in the local contactlist. " alt="" coords="943,867,1036,893"/><area shape="rect" id="node11" href="dchat_8c.html#ae2c246a2244b6435d0b307f0e893b0c6" title="Handles local connection requests from the user. " alt="" coords="177,1120,362,1147"/><area shape="rect" id="node5" href="log_8c.html#a677da14e8c4326bde43622f233f1ead3" title="Prints an error message and terminates this program. " alt="" coords="1322,461,1369,488"/><area shape="rect" id="node4" href="log_8c.html#a38678da7483f269b8c96f83a8f45ef12" title="Log a message to a file. " alt="" coords="1475,1171,1557,1197"/><area shape="rect" id="node7" href="network_8c.html#a139629f69df293ba1da88fea96af5e5e" title="Checks wether the given onion&#45;id is a valid onion address. " alt="" coords="1292,917,1399,944"/><area shape="rect" id="node8" href="network_8c.html#a53aa686284d28600afef0e06d7ab3d54" title="Checks wether the given port is a valid TCP port. " alt="" coords="1297,968,1394,995"/><area shape="rect" id="node10" href="contact_8c.html#ac15f4eb395316547db5ceba947a2f3b9" title="Converts a contact into a string. " alt="" coords="1090,917,1214,944"/><area shape="rect" id="node12" href="network_8c.html#abd951e9fd43b0ec9248ca6ec43398c6b" title="Creates a TOR socket. " alt="" coords="411,1373,539,1400"/><area shape="rect" id="node14" href="log_8c.html#aba81f1b639baac0f96848d9cb3a3b207" title="Log a message together with a string representation of errno as error. " alt="" coords="794,1449,873,1476"/><area shape="rect" id="node18" href="contact_8c.html#a6777b1a477207c7bbc9e560cf9caabed" title="Adds a new contact to the local contactlist. " alt="" coords="427,1019,522,1045"/><area shape="rect" id="node20" href="contact_8c.html#a625b0742c9e1cbd35146d35ecbf25282" title="Sends local contactlist to a contact. " alt="" coords="421,943,529,969"/><area shape="rect" id="node13" href="network_8c.html#a77de9c9eb5a8ea2a6da108270bd7417e" title="Connects to a remote socket using the given socket address. " alt="" coords="614,1424,701,1451"/><area shape="rect" id="node15" href="network_8c.html#abd49b4a8eb0f62dc3be6755729d672b8" title="Writes a SOCKS PDU to the given socket. " alt="" coords="604,1323,711,1349"/><area shape="rect" id="node16" href="network_8c.html#a0ace1062fab444c73177e0552e019425" title="Reads a SOCKS response PDU from the given socket. " alt="" coords="605,1373,710,1400"/><area shape="rect" id="node17" href="network_8c.html#abd3d58b10c19c6d550b6e6aa86c9dc5c" title="Parses given status and returns its corresponding status message. " alt="" coords="587,1272,727,1299"/><area shape="rect" id="node19" href="contact_8c.html#a0de7073d40f7447f933e334054d432d8" title="Resizes the contactlist. " alt="" coords="1088,1069,1216,1096"/><area shape="rect" id="node21" href="decoder_8c.html#abaf80c220fd915287452a6baa5b05e2e" title="Initializes a DChat PDU with the given values. " alt="" coords="1097,1019,1207,1045"/><area shape="rect" id="node25" href="decoder_8c.html#af4aaf258b8866187ed65d6d1c23083cb" title="Converts a PDU to a string that will be written to a file descriptor. " alt="" coords="617,208,697,235"/><area shape="rect" id="node22" href="decoder_8c.html#a8a64791a4f610ecaff285d91512ea927" title="Checks if the given version is a valid and supported DChat version. " alt="" coords="1287,1019,1404,1045"/><area shape="rect" id="node23" href="decoder_8c.html#a2960a3c598ee607801fc333b5d1cfce9" title="Checks if the given Content&#45;Type number is a valid DChat Content&#45;Type. " alt="" coords="1270,1069,1421,1096"/><area shape="rect" id="node24" href="decoder_8c.html#a338364bcfd88f32a9b162c4e12bd3cad" title="Checks if the given nickname is a valid DChat nickname. " alt="" coords="1280,791,1411,817"/><area shape="rect" id="node26" href="decoder_8c.html#aed8d6a7e8b9b368fa54d7af2f2a5231e" title="Initializes a DChat V1 structure containing all available and supported headers of the DChat V1 proto..." alt="" coords="939,487,1039,513"/><area shape="rect" id="node46" href="decoder_8c.html#a92bdcc4d06ae8c3fb41f6f0489a44891" title="Crafts a DChat header string. " alt="" coords="776,208,891,235"/><area shape="rect" id="node27" href="decoder_8c.html#a42be8c12ff007b95a9a98175c1738d0c" title="Parses the given value to a supported version of DChat and sets, if valid, its value in the PDU struc..." alt="" coords="1097,563,1207,589"/><area shape="rect" id="node28" href="decoder_8c.html#ae08df473fb28e4f06044d50f8428eafc" title="Converts the version field in the PDU to a string and sets the address of the given value parameter t..." alt="" coords="1097,411,1207,437"/><area shape="rect" id="node29" href="decoder_8c.html#af7a1420a7b9ce8077005793d5baa48b3" title="Parses the given value to a supported content&#45;type of DChat and sets, if valid, its value in the PDU ..." alt="" coords="1099,5,1205,32"/><area shape="rect" id="node31" href="decoder_8c.html#a9ba39a2b36836a7dc2dbe548cd02c21f" title="Converts the content&#45;type field in the PDU to a string and sets the address of the given value parame..." alt="" coords="1099,107,1205,133"/><area shape="rect" id="node32" href="decoder_8c.html#a186b736b428ee1ba79bc538a560a9e28" title="Parses the given value to a content&#45;length and sets its value, if valid, in the given PDU structure..." alt="" coords="1099,664,1205,691"/><area shape="rect" id="node34" href="decoder_8c.html#aa34bd8632014a3a135df77c5786bda6d" title="Converts the content&#45;length field in the PDU to a string and sets the address of the given value para..." alt="" coords="1099,461,1205,488"/><area shape="rect" id="node35" href="decoder_8c.html#ace47761936ccffbfbac61e6905d8333d" title="Parses the given value to an onion address and sets its value , if valid, in the given PDU structure..." alt="" coords="1097,867,1207,893"/><area shape="rect" id="node36" href="decoder_8c.html#a019debfd4003c322fba5003b6c191129" title="Converts the onion&#45;id field in the PDU to a string and sets the address of the given value parameter ..." alt="" coords="1097,613,1207,640"/><area shape="rect" id="node37" href="decoder_8c.html#a93c5fb5eadf28693c56b187748a284b9" title="Parses the given value to a listening port and sets its value, if valid, in the given PDU structure..." alt="" coords="1097,968,1207,995"/><area shape="rect" id="node38" href="decoder_8c.html#ac89711a42de87d7b24f7e598b0167f85" title="Converts the listening&#45;port field in the PDU to a string and sets the address of the given value para..." alt="" coords="1097,816,1207,843"/><area shape="rect" id="node39" href="decoder_8c.html#a8a21bca3a0374aeda651aba069d0bfb4" title="Parses the given value to a nickname and sets its value, if valid, in the given PDU structure..." alt="" coords="1097,715,1207,741"/><area shape="rect" id="node40" href="decoder_8c.html#a5f3472fbd176480725e69578245d3c61" title="Converts the nickname field in the PDU to a string and sets the address of the given value parameter ..." alt="" coords="1097,512,1207,539"/><area shape="rect" id="node41" href="decoder_8c.html#ad1fb16f98ba7cba1d0e8394a0a825214" title="Parses the given value to a struct tm and sets its value, if valid, in the given PDU structure..." alt="" coords="1097,765,1207,792"/><area shape="rect" id="node42" href="decoder_8c.html#ab124906e75a01fb9448bf33eac5906da" title="Converts the sent field in the PDU to a string and sets the address of the given value parameter to t..." alt="" coords="1097,157,1207,184"/><area shape="rect" id="node44" href="decoder_8c.html#aa8ff1abc0a14ba58a3c7bfd5cc81fc1f" title="Parses the given value to a server field and sets its value, if valid, in the given PDU structure..." alt="" coords="1097,309,1207,336"/><area shape="rect" id="node45" href="decoder_8c.html#affa9e2c054d9f619c3cf426a4a2ed9c7" title="Converts the server field in the PDU to a string and sets the address of the given value parameter to..." alt="" coords="1097,360,1207,387"/><area shape="rect" id="node30" href="decoder_8c.html#ab89ef1994dd9e9d401b4c0d5feb594b2" title="Initializes a content&#45;types structure with all available content&#45;types in DChat. " alt="" coords="1280,45,1411,86"/><area shape="rect" id="node33" href="decoder_8c.html#a4ecd7cbbbe72098afc1bd5508067d8e4" title="Checks if the given Content&#45;Length is a valid DChat Content&#45;Length. " alt="" coords="1265,588,1426,615"/><area shape="rect" id="node43" href="util_8c.html#a14252469532ecf356f22412644467eba" title="Checks wether n successive bytes in the memory pointed by ptr are 0. " alt="" coords="1317,157,1374,184"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a625b0742c9e1cbd35146d35ecbf25282"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int send_contacts </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdchat__conf.html">dchat_conf_t</a> *&#160;</td>
          <td class="paramname"><em>cnf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends local contactlist to a contact. </p>
<p>Sends all known contacts stored in the contactlist within the global config in form of a "control/discover" PDU to the given contact. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cnf</td><td>Pointer to global configuration holding the contactlist </td></tr>
    <tr><td class="paramname">n</td><td>Index of contact to whom we send our contactlist (excluding him) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>amount of bytes that have been written as content, -1 on error </dd></dl>

<p>Definition at line <a class="el" href="contact_8c_source.html#l00051">51</a> of file <a class="el" href="contact_8c_source.html">contact.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="contact_8c_a625b0742c9e1cbd35146d35ecbf25282_cgraph.png" border="0" usemap="#contact_8c_a625b0742c9e1cbd35146d35ecbf25282_cgraph" alt=""/></div>
<map name="contact_8c_a625b0742c9e1cbd35146d35ecbf25282_cgraph" id="contact_8c_a625b0742c9e1cbd35146d35ecbf25282_cgraph">
<area shape="rect" id="node2" href="decoder_8c.html#abaf80c220fd915287452a6baa5b05e2e" title="Initializes a DChat PDU with the given values. " alt="" coords="611,56,720,83"/><area shape="rect" id="node4" href="log_8c.html#a021b18b681712d42cb07c99171691a84" title="Log a message. " alt="" coords="821,5,893,32"/><area shape="rect" id="node10" href="log_8c.html#a677da14e8c4326bde43622f233f1ead3" title="Prints an error message and terminates this program. " alt="" coords="834,512,881,539"/><area shape="rect" id="node11" href="contact_8c.html#ac15f4eb395316547db5ceba947a2f3b9" title="Converts a contact into a string. " alt="" coords="603,208,727,235"/><area shape="rect" id="node12" href="decoder_8c.html#af4aaf258b8866187ed65d6d1c23083cb" title="Converts a PDU to a string that will be written to a file descriptor. " alt="" coords="163,335,243,361"/><area shape="rect" id="node3" href="decoder_8c.html#a8a64791a4f610ecaff285d91512ea927" title="Checks if the given version is a valid and supported DChat version. " alt="" coords="799,56,916,83"/><area shape="rect" id="node6" href="decoder_8c.html#a2960a3c598ee607801fc333b5d1cfce9" title="Checks if the given Content&#45;Type number is a valid DChat Content&#45;Type. " alt="" coords="782,107,933,133"/><area shape="rect" id="node7" href="network_8c.html#a139629f69df293ba1da88fea96af5e5e" title="Checks wether the given onion&#45;id is a valid onion address. " alt="" coords="804,335,911,361"/><area shape="rect" id="node8" href="network_8c.html#a53aa686284d28600afef0e06d7ab3d54" title="Checks wether the given port is a valid TCP port. " alt="" coords="809,208,906,235"/><area shape="rect" id="node9" href="decoder_8c.html#a338364bcfd88f32a9b162c4e12bd3cad" title="Checks if the given nickname is a valid DChat nickname. " alt="" coords="792,157,923,184"/><area shape="rect" id="node5" href="log_8c.html#a38678da7483f269b8c96f83a8f45ef12" title="Log a message to a file. " alt="" coords="987,259,1069,285"/><area shape="rect" id="node13" href="decoder_8c.html#aed8d6a7e8b9b368fa54d7af2f2a5231e" title="Initializes a DChat V1 structure containing all available and supported headers of the DChat V1 proto..." alt="" coords="454,588,554,615"/><area shape="rect" id="node33" href="decoder_8c.html#a92bdcc4d06ae8c3fb41f6f0489a44891" title="Crafts a DChat header string. " alt="" coords="291,360,405,387"/><area shape="rect" id="node14" href="decoder_8c.html#a42be8c12ff007b95a9a98175c1738d0c" title="Parses the given value to a supported version of DChat and sets, if valid, its value in the PDU struc..." alt="" coords="610,461,721,488"/><area shape="rect" id="node15" href="decoder_8c.html#ae08df473fb28e4f06044d50f8428eafc" title="Converts the version field in the PDU to a string and sets the address of the given value parameter t..." alt="" coords="610,563,721,589"/><area shape="rect" id="node16" href="decoder_8c.html#af7a1420a7b9ce8077005793d5baa48b3" title="Parses the given value to a supported content&#45;type of DChat and sets, if valid, its value in the PDU ..." alt="" coords="612,867,719,893"/><area shape="rect" id="node18" href="decoder_8c.html#a9ba39a2b36836a7dc2dbe548cd02c21f" title="Converts the content&#45;type field in the PDU to a string and sets the address of the given value parame..." alt="" coords="612,816,719,843"/><area shape="rect" id="node19" href="decoder_8c.html#a186b736b428ee1ba79bc538a560a9e28" title="Parses the given value to a content&#45;length and sets its value, if valid, in the given PDU structure..." alt="" coords="613,1069,718,1096"/><area shape="rect" id="node21" href="decoder_8c.html#aa34bd8632014a3a135df77c5786bda6d" title="Converts the content&#45;length field in the PDU to a string and sets the address of the given value para..." alt="" coords="613,917,718,944"/><area shape="rect" id="node22" href="decoder_8c.html#ace47761936ccffbfbac61e6905d8333d" title="Parses the given value to an onion address and sets its value , if valid, in the given PDU structure..." alt="" coords="610,411,721,437"/><area shape="rect" id="node23" href="decoder_8c.html#a019debfd4003c322fba5003b6c191129" title="Converts the onion&#45;id field in the PDU to a string and sets the address of the given value parameter ..." alt="" coords="610,512,721,539"/><area shape="rect" id="node24" href="decoder_8c.html#a93c5fb5eadf28693c56b187748a284b9" title="Parses the given value to a listening port and sets its value, if valid, in the given PDU structure..." alt="" coords="610,107,721,133"/><area shape="rect" id="node25" href="decoder_8c.html#ac89711a42de87d7b24f7e598b0167f85" title="Converts the listening&#45;port field in the PDU to a string and sets the address of the given value para..." alt="" coords="610,259,721,285"/><area shape="rect" id="node26" href="decoder_8c.html#a8a21bca3a0374aeda651aba069d0bfb4" title="Parses the given value to a nickname and sets its value, if valid, in the given PDU structure..." alt="" coords="611,715,720,741"/><area shape="rect" id="node27" href="decoder_8c.html#a5f3472fbd176480725e69578245d3c61" title="Converts the nickname field in the PDU to a string and sets the address of the given value parameter ..." alt="" coords="611,157,720,184"/><area shape="rect" id="node28" href="decoder_8c.html#ad1fb16f98ba7cba1d0e8394a0a825214" title="Parses the given value to a struct tm and sets its value, if valid, in the given PDU structure..." alt="" coords="610,968,721,995"/><area shape="rect" id="node29" href="decoder_8c.html#ab124906e75a01fb9448bf33eac5906da" title="Converts the sent field in the PDU to a string and sets the address of the given value parameter to t..." alt="" coords="610,765,721,792"/><area shape="rect" id="node31" href="decoder_8c.html#aa8ff1abc0a14ba58a3c7bfd5cc81fc1f" title="Parses the given value to a server field and sets its value, if valid, in the given PDU structure..." alt="" coords="610,613,721,640"/><area shape="rect" id="node32" href="decoder_8c.html#affa9e2c054d9f619c3cf426a4a2ed9c7" title="Converts the server field in the PDU to a string and sets the address of the given value parameter to..." alt="" coords="610,664,721,691"/><area shape="rect" id="node17" href="decoder_8c.html#ab89ef1994dd9e9d401b4c0d5feb594b2" title="Initializes a content&#45;types structure with all available content&#45;types in DChat. " alt="" coords="792,838,923,879"/><area shape="rect" id="node20" href="decoder_8c.html#a4ecd7cbbbe72098afc1bd5508067d8e4" title="Checks if the given Content&#45;Length is a valid DChat Content&#45;Length. " alt="" coords="777,976,938,1003"/><area shape="rect" id="node30" href="util_8c.html#a14252469532ecf356f22412644467eba" title="Checks wether n successive bytes in the memory pointed by ptr are 0. " alt="" coords="829,765,886,792"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a5fc6d1fda23da9c12247773139cc9c74"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int string_to_contact </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcontact.html">contact_t</a> *&#160;</td>
          <td class="paramname"><em>contact</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>string</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Converts a string into a contact. </p>
<p>Converts a string containing contact information into a contact structure. The string has to be in the form of: &lt;onion-id&gt; &lt;port&gt;<br />
Further details can be found in the DChat protocol specification </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="contact_8c.html#ac15f4eb395316547db5ceba947a2f3b9" title="Converts a contact into a string. ">contact_to_string()</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">contact</td><td>Pointer to contact that should be converted to a string </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if conversion was successful, -1 on error </dd></dl>

<p>Definition at line <a class="el" href="contact_8c_source.html#l00340">340</a> of file <a class="el" href="contact_8c_source.html">contact.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="contact_8c_a5fc6d1fda23da9c12247773139cc9c74_cgraph.png" border="0" usemap="#contact_8c_a5fc6d1fda23da9c12247773139cc9c74_cgraph" alt=""/></div>
<map name="contact_8c_a5fc6d1fda23da9c12247773139cc9c74_cgraph" id="contact_8c_a5fc6d1fda23da9c12247773139cc9c74_cgraph">
<area shape="rect" id="node2" href="log_8c.html#a021b18b681712d42cb07c99171691a84" title="Log a message. " alt="" coords="196,5,268,32"/><area shape="rect" id="node4" href="network_8c.html#a139629f69df293ba1da88fea96af5e5e" title="Checks wether the given onion&#45;id is a valid onion address. " alt="" coords="179,56,285,83"/><area shape="rect" id="node5" href="network_8c.html#a53aa686284d28600afef0e06d7ab3d54" title="Checks wether the given port is a valid TCP port. " alt="" coords="183,107,281,133"/><area shape="rect" id="node3" href="log_8c.html#a38678da7483f269b8c96f83a8f45ef12" title="Log a message to a file. " alt="" coords="333,5,416,32"/></map>
</div>
</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="contact_8c.html">contact.c</a></li>
    <li class="footer">Generated on Tue Aug 12 2014 19:39:08 for DChat by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.7 </li>
  </ul>
</div>
</body>
</html>
