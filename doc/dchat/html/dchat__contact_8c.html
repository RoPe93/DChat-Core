<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>DChat: src/dchat_contact.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">DChat
   &#160;<span id="projectnumber">0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('dchat__contact_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">dchat_contact.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This file contains functions concerning dchat contacts for adding, deleting, searching, sending and receiving contacts.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;arpa/inet.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &quot;dchat_h/dchat_contact.h&quot;</code><br />
<code>#include &quot;dchat_h/dchat_types.h&quot;</code><br />
<code>#include &quot;dchat_h/dchat_decoder.h&quot;</code><br />
<code>#include &quot;dchat_h/dchat.h&quot;</code><br />
<code>#include &quot;dchat_h/log.h&quot;</code><br />
<code>#include &quot;dchat_h/util.h&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for dchat_contact.c:</div>
<div class="dyncontent">
<div class="center"><img src="dchat__contact_8c__incl.png" border="0" usemap="#src_2dchat__contact_8c" alt=""/></div>
<map name="src_2dchat__contact_8c" id="src_2dchat__contact_8c">
<area shape="rect" id="node7" href="dchat__contact_8h_source.html" title="dchat_h/dchat_contact.h" alt="" coords="473,80,639,107"/><area shape="rect" id="node8" href="dchat__types_8h_source.html" title="dchat_types.h" alt="" coords="749,155,853,181"/><area shape="rect" id="node10" href="dchat__decoder_8h_source.html" title="dchat_h/dchat_decoder.h" alt="" coords="715,80,887,107"/><area shape="rect" id="node11" href="dchat_8h_source.html" title="dchat_h/dchat.h" alt="" coords="912,80,1029,107"/><area shape="rect" id="node13" href="log_8h_source.html" title="dchat_h/log.h" alt="" coords="1054,80,1156,107"/><area shape="rect" id="node15" href="util_8h_source.html" title="dchat_h/util.h" alt="" coords="1181,80,1283,107"/></map>
</div>
</div>
<p><a href="dchat__contact_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a625b0742c9e1cbd35146d35ecbf25282"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dchat__contact_8c.html#a625b0742c9e1cbd35146d35ecbf25282">send_contacts</a> (<a class="el" href="structdchat__conf.html">dchat_conf_t</a> *<a class="el" href="dchat_8c.html#a5497dfcbcfecec06aaf63df011c70f83">cnf</a>, int n)</td></tr>
<tr class="memdesc:a625b0742c9e1cbd35146d35ecbf25282"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends local contactlist to a contact.  <a href="#a625b0742c9e1cbd35146d35ecbf25282">More...</a><br /></td></tr>
<tr class="separator:a625b0742c9e1cbd35146d35ecbf25282"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2161fbd1e0fc61c762f08bb102e54ab8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dchat__contact_8c.html#a2161fbd1e0fc61c762f08bb102e54ab8">receive_contacts</a> (<a class="el" href="structdchat__conf.html">dchat_conf_t</a> *<a class="el" href="dchat_8c.html#a5497dfcbcfecec06aaf63df011c70f83">cnf</a>, <a class="el" href="structdchat__pdu.html">dchat_pdu_t</a> *pdu)</td></tr>
<tr class="memdesc:a2161fbd1e0fc61c762f08bb102e54ab8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Contacts transferred via PDU will be added to the contactlist.  <a href="#a2161fbd1e0fc61c762f08bb102e54ab8">More...</a><br /></td></tr>
<tr class="separator:a2161fbd1e0fc61c762f08bb102e54ab8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0681254b16e6d20d63a03aed84c12e2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dchat__contact_8c.html#aa0681254b16e6d20d63a03aed84c12e2">check_duplicates</a> (<a class="el" href="structdchat__conf.html">dchat_conf_t</a> *<a class="el" href="dchat_8c.html#a5497dfcbcfecec06aaf63df011c70f83">cnf</a>, int n)</td></tr>
<tr class="memdesc:aa0681254b16e6d20d63a03aed84c12e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks the local contactlist for duplicates.  <a href="#aa0681254b16e6d20d63a03aed84c12e2">More...</a><br /></td></tr>
<tr class="separator:aa0681254b16e6d20d63a03aed84c12e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac15f4eb395316547db5ceba947a2f3b9"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dchat__contact_8c.html#ac15f4eb395316547db5ceba947a2f3b9">contact_to_string</a> (<a class="el" href="structcontact.html">contact_t</a> *<a class="el" href="structcontact.html">contact</a>)</td></tr>
<tr class="memdesc:ac15f4eb395316547db5ceba947a2f3b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts a contact into a string.  <a href="#ac15f4eb395316547db5ceba947a2f3b9">More...</a><br /></td></tr>
<tr class="separator:ac15f4eb395316547db5ceba947a2f3b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fc6d1fda23da9c12247773139cc9c74"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dchat__contact_8c.html#a5fc6d1fda23da9c12247773139cc9c74">string_to_contact</a> (<a class="el" href="structcontact.html">contact_t</a> *<a class="el" href="structcontact.html">contact</a>, char *string)</td></tr>
<tr class="memdesc:a5fc6d1fda23da9c12247773139cc9c74"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts a string into a contact.  <a href="#a5fc6d1fda23da9c12247773139cc9c74">More...</a><br /></td></tr>
<tr class="separator:a5fc6d1fda23da9c12247773139cc9c74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0de7073d40f7447f933e334054d432d8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dchat__contact_8c.html#a0de7073d40f7447f933e334054d432d8">realloc_contactlist</a> (<a class="el" href="structdchat__conf.html">dchat_conf_t</a> *<a class="el" href="dchat_8c.html#a5497dfcbcfecec06aaf63df011c70f83">cnf</a>, int newsize)</td></tr>
<tr class="memdesc:a0de7073d40f7447f933e334054d432d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resizes the contactlist.  <a href="#a0de7073d40f7447f933e334054d432d8">More...</a><br /></td></tr>
<tr class="separator:a0de7073d40f7447f933e334054d432d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1440cfddd2b95761ff972d50e0e0f2c6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dchat__contact_8c.html#a1440cfddd2b95761ff972d50e0e0f2c6">add_contact</a> (<a class="el" href="structdchat__conf.html">dchat_conf_t</a> *<a class="el" href="dchat_8c.html#a5497dfcbcfecec06aaf63df011c70f83">cnf</a>, int fd, struct sockaddr_storage *ss)</td></tr>
<tr class="memdesc:a1440cfddd2b95761ff972d50e0e0f2c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a new contact to the local contactlist.  <a href="#a1440cfddd2b95761ff972d50e0e0f2c6">More...</a><br /></td></tr>
<tr class="separator:a1440cfddd2b95761ff972d50e0e0f2c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56a9992b188f855108c72588953fe8a6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dchat__contact_8c.html#a56a9992b188f855108c72588953fe8a6">del_contact</a> (<a class="el" href="structdchat__conf.html">dchat_conf_t</a> *<a class="el" href="dchat_8c.html#a5497dfcbcfecec06aaf63df011c70f83">cnf</a>, int n)</td></tr>
<tr class="memdesc:a56a9992b188f855108c72588953fe8a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deletes a contact from the local contactlist.  <a href="#a56a9992b188f855108c72588953fe8a6">More...</a><br /></td></tr>
<tr class="separator:a56a9992b188f855108c72588953fe8a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01eb319ee1d229714b6a20e144181a1a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dchat__contact_8c.html#a01eb319ee1d229714b6a20e144181a1a">find_contact</a> (<a class="el" href="structdchat__conf.html">dchat_conf_t</a> *<a class="el" href="dchat_8c.html#a5497dfcbcfecec06aaf63df011c70f83">cnf</a>, <a class="el" href="structcontact.html">contact_t</a> *<a class="el" href="structcontact.html">contact</a>, int begin)</td></tr>
<tr class="memdesc:a01eb319ee1d229714b6a20e144181a1a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Searches a contact in the local contactlist.  <a href="#a01eb319ee1d229714b6a20e144181a1a">More...</a><br /></td></tr>
<tr class="separator:a01eb319ee1d229714b6a20e144181a1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file contains functions concerning dchat contacts for adding, deleting, searching, sending and receiving contacts. </p>

<p>Definition in file <a class="el" href="dchat__contact_8c_source.html">dchat_contact.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a1440cfddd2b95761ff972d50e0e0f2c6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int add_contact </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdchat__conf.html">dchat_conf_t</a> *&#160;</td>
          <td class="paramname"><em>cnf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct sockaddr_storage *&#160;</td>
          <td class="paramname"><em>ss</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds a new contact to the local contactlist. </p>
<p>The given socket descriptor and socket address of the remote client will be used to add a new contact to the contactlist holded by the global config. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cnf</td><td>Pointer to dchat_conf_t structure holding the contact list </td></tr>
    <tr><td class="paramname">fd</td><td>Socket file descriptor of the new contact </td></tr>
    <tr><td class="paramname">ss</td><td>Pointer to socket address of the new contact </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>index of contact list, where new contact has been added or -1 if contact list is full </dd></dl>

<p>Definition at line <a class="el" href="dchat__contact_8c_source.html#l00583">583</a> of file <a class="el" href="dchat__contact_8c_source.html">dchat_contact.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="dchat__contact_8c_a1440cfddd2b95761ff972d50e0e0f2c6_cgraph.png" border="0" usemap="#dchat__contact_8c_a1440cfddd2b95761ff972d50e0e0f2c6_cgraph" alt=""/></div>
<map name="dchat__contact_8c_a1440cfddd2b95761ff972d50e0e0f2c6_cgraph" id="dchat__contact_8c_a1440cfddd2b95761ff972d50e0e0f2c6_cgraph">
<area shape="rect" id="node2" href="dchat__contact_8c.html#a0de7073d40f7447f933e334054d432d8" title="Resizes the contactlist. " alt="" coords="149,5,277,32"/><area shape="rect" id="node3" href="log_8c.html#a021b18b681712d42cb07c99171691a84" title="Log a message. " alt="" coords="325,5,397,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa0681254b16e6d20d63a03aed84c12e2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int check_duplicates </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdchat__conf.html">dchat_conf_t</a> *&#160;</td>
          <td class="paramname"><em>cnf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks the local contactlist for duplicates. </p>
<p>Checks if there are duplicate contacts in the contactlist. Contacts with the same listening port and ip address are considered as duplicate. If there are duplicates, the index of the contact which should be deleted will be returned. This function implements the duplicate detection mechanismn of the DChat protocol. Therefore for further information read the DChat protocol specification for detecting and removing duplicates. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="dchat__contact_8c.html#a01eb319ee1d229714b6a20e144181a1a" title="Searches a contact in the local contactlist. ">find_contact()</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cnf</td><td>Pointer to global configuration holding the contactlist </td></tr>
    <tr><td class="paramname">n</td><td>Index of contact to check for duplicates </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>index of duplicate, -1 if there are no duplicates, -2 on error </dd></dl>

<p>Definition at line <a class="el" href="dchat__contact_8c_source.html#l00214">214</a> of file <a class="el" href="dchat__contact_8c_source.html">dchat_contact.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="dchat__contact_8c_aa0681254b16e6d20d63a03aed84c12e2_cgraph.png" border="0" usemap="#dchat__contact_8c_aa0681254b16e6d20d63a03aed84c12e2_cgraph" alt=""/></div>
<map name="dchat__contact_8c_aa0681254b16e6d20d63a03aed84c12e2_cgraph" id="dchat__contact_8c_aa0681254b16e6d20d63a03aed84c12e2_cgraph">
<area shape="rect" id="node2" href="dchat__contact_8c.html#a01eb319ee1d229714b6a20e144181a1a" title="Searches a contact in the local contactlist. " alt="" coords="179,31,272,57"/><area shape="rect" id="node4" href="util_8c.html#a279f65250f814269adbaadf7f94680c5" title="Determines the address family of the given socket address structure. " alt="" coords="493,5,576,32"/><area shape="rect" id="node5" href="log_8c.html#a021b18b681712d42cb07c99171691a84" title="Log a message. " alt="" coords="499,56,571,83"/><area shape="rect" id="node3" href="dchat__contact_8c.html#ac15f4eb395316547db5ceba947a2f3b9" title="Converts a contact into a string. " alt="" coords="321,31,445,57"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac15f4eb395316547db5ceba947a2f3b9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* contact_to_string </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcontact.html">contact_t</a> *&#160;</td>
          <td class="paramname"><em>contact</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Converts a contact into a string. </p>
<p>This function converts a contact into a string representation. The string of the contact will then be returned and should be freed. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">contact</td><td>Pointer to contact that should be converted to a string </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>String representation of contact, NULL on error </dd></dl>

<p>Definition at line <a class="el" href="dchat__contact_8c_source.html#l00374">374</a> of file <a class="el" href="dchat__contact_8c_source.html">dchat_contact.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="dchat__contact_8c_ac15f4eb395316547db5ceba947a2f3b9_cgraph.png" border="0" usemap="#dchat__contact_8c_ac15f4eb395316547db5ceba947a2f3b9_cgraph" alt=""/></div>
<map name="dchat__contact_8c_ac15f4eb395316547db5ceba947a2f3b9_cgraph" id="dchat__contact_8c_ac15f4eb395316547db5ceba947a2f3b9_cgraph">
<area shape="rect" id="node2" href="util_8c.html#a279f65250f814269adbaadf7f94680c5" title="Determines the address family of the given socket address structure. " alt="" coords="179,5,261,32"/><area shape="rect" id="node3" href="log_8c.html#a021b18b681712d42cb07c99171691a84" title="Log a message. " alt="" coords="184,56,256,83"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a56a9992b188f855108c72588953fe8a6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int del_contact </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdchat__conf.html">dchat_conf_t</a> *&#160;</td>
          <td class="paramname"><em>cnf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deletes a contact from the local contactlist. </p>
<p>Deletes a contact from the contact list holded by the global config. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cnf</td><td>Pointer to dchat_conf_t structure holding the contact list </td></tr>
    <tr><td class="paramname">n</td><td>Index of customer in the customer list </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 if index is out of bounds </dd></dl>

<p>Definition at line <a class="el" href="dchat__contact_8c_source.html#l00622">622</a> of file <a class="el" href="dchat__contact_8c_source.html">dchat_contact.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="dchat__contact_8c_a56a9992b188f855108c72588953fe8a6_cgraph.png" border="0" usemap="#dchat__contact_8c_a56a9992b188f855108c72588953fe8a6_cgraph" alt=""/></div>
<map name="dchat__contact_8c_a56a9992b188f855108c72588953fe8a6_cgraph" id="dchat__contact_8c_a56a9992b188f855108c72588953fe8a6_cgraph">
<area shape="rect" id="node2" href="log_8c.html#a021b18b681712d42cb07c99171691a84" title="Log a message. " alt="" coords="320,5,392,32"/><area shape="rect" id="node3" href="dchat__contact_8c.html#a0de7073d40f7447f933e334054d432d8" title="Resizes the contactlist. " alt="" coords="144,31,272,57"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a01eb319ee1d229714b6a20e144181a1a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int find_contact </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdchat__conf.html">dchat_conf_t</a> *&#160;</td>
          <td class="paramname"><em>cnf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcontact.html">contact_t</a> *&#160;</td>
          <td class="paramname"><em>contact</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>begin</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Searches a contact in the local contactlist. </p>
<p>Searches for a contact in the contactlist holded within the global config and returns its index in the contactlist. To find a contact, its socket address and listening port will be used </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cnf</td><td>Pointer to global configuration holding the contactlist </td></tr>
    <tr><td class="paramname">contact</td><td>Pointer to contact to search for </td></tr>
    <tr><td class="paramname">begin</td><td>Index where the search will begin in the contactlist </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>index of contact, -1 if the contact represents ourself, -2 if not found </dd></dl>

<p>Definition at line <a class="el" href="dchat__contact_8c_source.html#l00662">662</a> of file <a class="el" href="dchat__contact_8c_source.html">dchat_contact.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="dchat__contact_8c_a01eb319ee1d229714b6a20e144181a1a_cgraph.png" border="0" usemap="#dchat__contact_8c_a01eb319ee1d229714b6a20e144181a1a_cgraph" alt=""/></div>
<map name="dchat__contact_8c_a01eb319ee1d229714b6a20e144181a1a_cgraph" id="dchat__contact_8c_a01eb319ee1d229714b6a20e144181a1a_cgraph">
<area shape="rect" id="node2" href="dchat__contact_8c.html#ac15f4eb395316547db5ceba947a2f3b9" title="Converts a contact into a string. " alt="" coords="147,31,271,57"/><area shape="rect" id="node3" href="util_8c.html#a279f65250f814269adbaadf7f94680c5" title="Determines the address family of the given socket address structure. " alt="" coords="320,5,403,32"/><area shape="rect" id="node4" href="log_8c.html#a021b18b681712d42cb07c99171691a84" title="Log a message. " alt="" coords="325,56,397,83"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a0de7073d40f7447f933e334054d432d8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int realloc_contactlist </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdchat__conf.html">dchat_conf_t</a> *&#160;</td>
          <td class="paramname"><em>cnf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>newsize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Resizes the contactlist. </p>
<p>Function to resize the contactlist to a given size. Old contacts are copied to the new resized contact list if they fit in it </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cnf</td><td>Global config structure holding the contactlist </td></tr>
    <tr><td class="paramname">newsize</td><td>New size of the contactlist </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on error, -2 if the new size is lower than the amount of contacts actually stored within the contactlist </dd></dl>

<p>Definition at line <a class="el" href="dchat__contact_8c_source.html#l00528">528</a> of file <a class="el" href="dchat__contact_8c_source.html">dchat_contact.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="dchat__contact_8c_a0de7073d40f7447f933e334054d432d8_cgraph.png" border="0" usemap="#dchat__contact_8c_a0de7073d40f7447f933e334054d432d8_cgraph" alt=""/></div>
<map name="dchat__contact_8c_a0de7073d40f7447f933e334054d432d8_cgraph" id="dchat__contact_8c_a0de7073d40f7447f933e334054d432d8_cgraph">
<area shape="rect" id="node2" href="log_8c.html#a021b18b681712d42cb07c99171691a84" title="Log a message. " alt="" coords="181,5,253,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a2161fbd1e0fc61c762f08bb102e54ab8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int receive_contacts </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdchat__conf.html">dchat_conf_t</a> *&#160;</td>
          <td class="paramname"><em>cnf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdchat__pdu.html">dchat_pdu_t</a> *&#160;</td>
          <td class="paramname"><em>pdu</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Contacts transferred via PDU will be added to the contactlist. </p>
<p>Parses the contact information stored in the given PDU, connects to this remote client , if this client is unknown, the local contactlist within the global config will be sent to him. Finally the remote client is added as contact to the local contactlist. For every parsed contact information, this procedure is repeated. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cnf</td><td>Pointer to global configuration holding the contactlist </td></tr>
    <tr><td class="paramname">pdu</td><td>PDU with the contact information in its content </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>amount of new contacts added to the contactlist, -1 on error </dd></dl>

<p>Definition at line <a class="el" href="dchat__contact_8c_source.html#l00142">142</a> of file <a class="el" href="dchat__contact_8c_source.html">dchat_contact.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="dchat__contact_8c_a2161fbd1e0fc61c762f08bb102e54ab8_cgraph.png" border="0" usemap="#dchat__contact_8c_a2161fbd1e0fc61c762f08bb102e54ab8_cgraph" alt=""/></div>
<map name="dchat__contact_8c_a2161fbd1e0fc61c762f08bb102e54ab8_cgraph" id="dchat__contact_8c_a2161fbd1e0fc61c762f08bb102e54ab8_cgraph">
<area shape="rect" id="node2" href="dchat__decoder_8c.html#ab4502d6fa3578ce5f3b4a92e5489c978" title="Extracts a fraction of the content. " alt="" coords="411,56,533,83"/><area shape="rect" id="node3" href="log_8c.html#a021b18b681712d42cb07c99171691a84" title="Log a message. " alt="" coords="779,183,851,209"/><area shape="rect" id="node4" href="dchat__contact_8c.html#a5fc6d1fda23da9c12247773139cc9c74" title="Converts a string into a contact. " alt="" coords="207,5,331,32"/><area shape="rect" id="node5" href="dchat__contact_8c.html#a01eb319ee1d229714b6a20e144181a1a" title="Searches a contact in the local contactlist. " alt="" coords="223,335,316,361"/><area shape="rect" id="node8" href="dchat_8c.html#aa192202231a392d88dd4c1460b82affe" title="Handles local connection requests from the user. " alt="" coords="177,233,362,260"/><area shape="rect" id="node6" href="dchat__contact_8c.html#ac15f4eb395316547db5ceba947a2f3b9" title="Converts a contact into a string. " alt="" coords="583,360,707,387"/><area shape="rect" id="node7" href="util_8c.html#a279f65250f814269adbaadf7f94680c5" title="Determines the address family of the given socket address structure. " alt="" coords="773,385,856,412"/><area shape="rect" id="node9" href="util_8c.html#a77de9c9eb5a8ea2a6da108270bd7417e" title="Connects to a remote socket using the given socket address. " alt="" coords="429,208,515,235"/><area shape="rect" id="node10" href="log_8c.html#a447124894e44d19ff906633927930c19" title="Log a message together with a string representation of errno as error. " alt="" coords="606,157,685,184"/><area shape="rect" id="node11" href="dchat__contact_8c.html#a1440cfddd2b95761ff972d50e0e0f2c6" title="Adds a new contact to the local contactlist. " alt="" coords="425,259,519,285"/><area shape="rect" id="node13" href="dchat__contact_8c.html#a625b0742c9e1cbd35146d35ecbf25282" title="Sends local contactlist to a contact. " alt="" coords="418,309,526,336"/><area shape="rect" id="node12" href="dchat__contact_8c.html#a0de7073d40f7447f933e334054d432d8" title="Resizes the contactlist. " alt="" coords="581,208,709,235"/><area shape="rect" id="node14" href="dchat__decoder_8c.html#af4aaf258b8866187ed65d6d1c23083cb" title="Converts a PDU to a string that will be written to a file descriptor. " alt="" coords="605,309,685,336"/><area shape="rect" id="node15" href="dchat__decoder_8c.html#ae5745b50cd3cc0aa6228e35d08690fdc" title="Crafts a DChat header string. " alt="" coords="757,309,872,336"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a625b0742c9e1cbd35146d35ecbf25282"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int send_contacts </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdchat__conf.html">dchat_conf_t</a> *&#160;</td>
          <td class="paramname"><em>cnf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends local contactlist to a contact. </p>
<p>Sends all known contacts stored in the contactlist within the global config in form of a "control/discover" PDU to the given contact. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cnf</td><td>Pointer to global configuration holding the contactlist </td></tr>
    <tr><td class="paramname">n</td><td>Index of contact to whom we send our contactlist (excluding him) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>amount of bytes that have been written as content, -1 on error </dd></dl>

<p>Definition at line <a class="el" href="dchat__contact_8c_source.html#l00053">53</a> of file <a class="el" href="dchat__contact_8c_source.html">dchat_contact.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="dchat__contact_8c_a625b0742c9e1cbd35146d35ecbf25282_cgraph.png" border="0" usemap="#dchat__contact_8c_a625b0742c9e1cbd35146d35ecbf25282_cgraph" alt=""/></div>
<map name="dchat__contact_8c_a625b0742c9e1cbd35146d35ecbf25282_cgraph" id="dchat__contact_8c_a625b0742c9e1cbd35146d35ecbf25282_cgraph">
<area shape="rect" id="node2" href="dchat__contact_8c.html#ac15f4eb395316547db5ceba947a2f3b9" title="Converts a contact into a string. " alt="" coords="163,5,287,32"/><area shape="rect" id="node4" href="log_8c.html#a021b18b681712d42cb07c99171691a84" title="Log a message. " alt="" coords="357,56,429,83"/><area shape="rect" id="node5" href="dchat__decoder_8c.html#af4aaf258b8866187ed65d6d1c23083cb" title="Converts a PDU to a string that will be written to a file descriptor. " alt="" coords="185,107,265,133"/><area shape="rect" id="node3" href="util_8c.html#a279f65250f814269adbaadf7f94680c5" title="Determines the address family of the given socket address structure. " alt="" coords="352,5,435,32"/><area shape="rect" id="node6" href="dchat__decoder_8c.html#ae5745b50cd3cc0aa6228e35d08690fdc" title="Crafts a DChat header string. " alt="" coords="336,107,451,133"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a5fc6d1fda23da9c12247773139cc9c74"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int string_to_contact </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcontact.html">contact_t</a> *&#160;</td>
          <td class="paramname"><em>contact</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>string</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Converts a string into a contact. </p>
<p>Converts a string containing contact information into a contact structure. The string has to be in the form of: &lt;ip&gt; &lt;port&gt;<br />
Further details can be found in the DChat protocol specification </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="dchat__contact_8c.html#ac15f4eb395316547db5ceba947a2f3b9" title="Converts a contact into a string. ">contact_to_string()</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">contact</td><td>Pointer to contact that should be converted to a string </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if conversion was successful, -1 on error </dd></dl>

<p>Definition at line <a class="el" href="dchat__contact_8c_source.html#l00447">447</a> of file <a class="el" href="dchat__contact_8c_source.html">dchat_contact.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="dchat__contact_8c_a5fc6d1fda23da9c12247773139cc9c74_cgraph.png" border="0" usemap="#dchat__contact_8c_a5fc6d1fda23da9c12247773139cc9c74_cgraph" alt=""/></div>
<map name="dchat__contact_8c_a5fc6d1fda23da9c12247773139cc9c74_cgraph" id="dchat__contact_8c_a5fc6d1fda23da9c12247773139cc9c74_cgraph">
<area shape="rect" id="node2" href="log_8c.html#a021b18b681712d42cb07c99171691a84" title="Log a message. " alt="" coords="179,5,251,32"/></map>
</div>
</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dchat__contact_8c.html">dchat_contact.c</a></li>
    <li class="footer">Generated on Sun Jun 22 2014 16:56:01 for DChat by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.7 </li>
  </ul>
</div>
</body>
</html>
